version: 0.2

environment_variables:
 plaintext:
  HUGO_VERSION: "0.76.2"
  
phases:
  runtime-versions:
    docker: 18
    
  build:
    commands:
        - rm -rf public
        - hugo
        - aws s3 sync public/ s3://s3-hugo/ --region us-east-1 --delete
        
  install:
    commands:
        - cd /tmp
        - wget https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz
        - tar -xvf hugo_${HUGO_VERSION}_Linux-64bit.tar.gz
        - mv hugo /usr/bin/hugo
        - rm -rf /tmp/*hugo*
        
  pre-build:
    commands:
        - echo Nada que hacer
       
  post-build:
     commands:
        - echo Build complete - Joel - Hugo demo
        
